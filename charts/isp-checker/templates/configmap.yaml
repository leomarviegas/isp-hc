apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "isp-checker.fullname" . }}-config
  labels:
    {{- include "isp-checker.labels" . | nindent 4 }}
data:
  # Application configuration
  LOG_LEVEL: {{ .Values.config.logLevel | default "info" | quote }}
  RUNS_DIR: {{ .Values.config.runsDir | default "/app/runs" | quote }}
  WORKER_COUNT: {{ .Values.config.workerCount | default "10" | quote }}

  # Rate limiting configuration
  RATE_LIMIT_REQUESTS: {{ .Values.config.rateLimit.requests | default "100" | quote }}
  RATE_LIMIT_WINDOW: {{ .Values.config.rateLimit.window | default "60" | quote }}

  # CORS configuration
  {{- if .Values.config.corsOrigins }}
  CORS_ORIGINS: {{ .Values.config.corsOrigins | quote }}
  {{- end }}

  # Metrics configuration
  METRICS_ENABLED: {{ .Values.config.metricsEnabled | default "true" | quote }}
